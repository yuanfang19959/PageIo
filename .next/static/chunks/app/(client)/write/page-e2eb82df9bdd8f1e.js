(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[832],{2181:function(e,t,n){Promise.resolve().then(n.bind(n,499))},8530:function(e,t,n){"use strict";async function i(e,t){try{return await fetch(e,{...t,credentials:"include",headers:{...null==t?void 0:t.headers}})}catch(e){return new Response(JSON.stringify({message:"Failed to fetch",code:500}))}}n.d(t,{FR:function(){return s},pG:function(){return r},H7:function(){return a}}),n(6463);let o="http://127.0.0.1:7001",s=async e=>(await i("".concat(o,"/api/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),a=async e=>(await i("".concat(o,"/api/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),r=async e=>(await i("".concat(o,"/api/post"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})).json()},499:function(e,t,n){"use strict";n.r(t);var i=n(7437),o=n(2265),s=n(435),a=n(3799),r=n(5319),c=n(6744),u=n.n(c),d=n(8530),l=n(6463);t.default=()=>{let e=(0,l.useRouter)(),[t,n]=(0,o.useState)(""),[c]=s.Z.useForm();return(0,o.useEffect)(()=>{let e=window.document.getElementById("yuqueditor");setTimeout(()=>{let t=document.createElement("script");t.src="https://gw.alipayobjects.com/render/p/yuyan_npm/@alipay_lakex-doc/1.48.0/umd/doc.umd.js",document.body.appendChild(t),t.onload=function(){if(window.Doc){let{createOpenEditor:t}=window.Doc;setTimeout(()=>{let i=t(e,{image:{uploadFileURL:"/api/upload",crawlURL:"/api/upload"},file:{uploadFileURL:"/api/upload"}});i.setDocument("text/lake",""),i.on("contentchange",()=>{n(i.getDocument("text/lake"))})},500)}}},2e3)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("script",{crossorigin:!0,src:"https://unpkg.com/react@18/umd/react.production.min.js"}),(0,i.jsx)("script",{crossorigin:!0,src:"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"}),(0,i.jsxs)("div",{className:u().content,children:[(0,i.jsx)("div",{className:u().form,children:(0,i.jsxs)(s.Z,{onFinish:n=>{(0,d.pG)({...n,content:t}).then(t=>{t.success&&e.push("/blog/".concat(t.data.id))})},layout:"vertical",form:c,children:[(0,i.jsx)(s.Z.Item,{label:"标题",name:"title",rules:[{required:!0}],children:(0,i.jsx)(a.Z,{})}),(0,i.jsx)(s.Z.Item,{label:"类别",name:"category",rules:[{required:!0}],children:(0,i.jsx)(a.Z,{})}),(0,i.jsx)(s.Z.Item,{label:"标签",name:"tags",rules:[{required:!1}],children:(0,i.jsx)(a.Z,{})})]})}),(0,i.jsx)("div",{id:"yuqueditor",className:"ne-doc-major-editor ne-viewer lakex-yuque-theme-light ne-typography-classic ne-paragraph-spacing-relax ne-viewer-layout-mode-fixed ".concat(u().yuqueditor)}),(0,i.jsx)(r.ZP,{htmlType:"submit",type:"primary",className:u().submitbtn,onClick:()=>c.submit(),children:"保存"})]})]})}},6744:function(e){e.exports={content:"write_content__4_W8_",submitbtn:"write_submitbtn__CjETg",yuqueditor:"write_yuqueditor__asTLH"}}},function(e){e.O(0,[753,684,732,971,23,744],function(){return e(e.s=2181)}),_N_E=e.O()}]);