(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{8674:function(e,t,n){Promise.resolve().then(n.bind(n,392)),Promise.resolve().then(n.t.bind(n,647,23))},8530:function(e,t,n){"use strict";async function s(e,t){try{return await fetch(e,{...t,credentials:"include",headers:{...null==t?void 0:t.headers}})}catch(e){return new Response(JSON.stringify({message:"Failed to fetch",code:500}))}}n.d(t,{FR:function(){return r},pG:function(){return o},H7:function(){return a}}),n(6463);let i="http://127.0.0.1:7001",r=async e=>(await s("".concat(i,"/api/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),a=async e=>(await s("".concat(i,"/api/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),o=async e=>(await s("".concat(i,"/api/post"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})).json()},392:function(e,t,n){"use strict";var s=n(7437),i=n(8530),r=n(6235),a=n(435),o=n(3799),l=n(9733),c=n(5319),u=n(6463);t.default=()=>{let e=(0,u.useRouter)();return(0,s.jsxs)(a.Z,{onFinish:t=>{let n=t=>{t.success?(sessionStorage.setItem("token",t.data.token),e.push("/write")):r.ZP.error(t.message)};"login"==t.type?(0,i.FR)(t).then(n):(0,i.H7)(t).then(n)},labelAlign:"right",layout:"vertical",children:[(0,s.jsx)(a.Z.Item,{label:"账号",name:"username",rules:[{required:!0,message:"请输入"}],children:(0,s.jsx)(o.Z,{style:{width:"100%"},minLength:11,maxLength:11,showCount:!0})}),(0,s.jsx)(a.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入"}],children:(0,s.jsx)(o.Z,{type:"password",minLength:6})}),(0,s.jsx)(a.Z.Item,{label:"类型",name:"type",rules:[{required:!0}],initialValue:"login",children:(0,s.jsxs)(l.ZP.Group,{children:[(0,s.jsx)(l.ZP,{value:"login",children:"登录"}),(0,s.jsx)(l.ZP,{value:"register",children:"注册"})]})}),(0,s.jsx)(c.ZP,{htmlType:"submit",style:{width:"100%"},type:"primary",children:"登录"})]})}},647:function(e){e.exports={bg:"login_bg__U_WMI"}}},function(e){e.O(0,[454,684,732,118,971,23,744],function(){return e(e.s=8674)}),_N_E=e.O()}]);